"""Changing column types

Revision ID: 49c1a26e13b1
Revises: 7ba007d51ed9
Create Date: 2017-02-23 15:00:12.818412

"""
from alembic import op
import sqlalchemy as sa
import model.utils
from sqlalchemy.dialects import mysql

from participant_enums import HPOId, PhysicalMeasurementsStatus, QuestionnaireStatus
from participant_enums import MembershipTier, GenderIdentity, Ethnicity, Race

# revision identifiers, used by Alembic.
revision = '49c1a26e13b1'
down_revision = '7ba007d51ed9'
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.alter_column('biobank_ordered_sample', 'description',
               existing_type=mysql.TEXT(),
               nullable=False)
    op.alter_column('biobank_ordered_sample', 'processing_required',
               existing_type=mysql.TINYINT(display_width=1),
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('metrics_version', 'complete',
               existing_type=mysql.TINYINT(display_width=1),
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('metrics_version', 'in_progress',
               existing_type=mysql.TINYINT(display_width=1),
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('participant_summary', 'consent_for_electronic_health_records',
               existing_type=mysql.SMALLINT(display_width=6),
               type_=model.utils.Enum(QuestionnaireStatus),
               existing_nullable=True)
    op.alter_column('participant_summary', 'consent_for_study_enrollment',
               existing_type=mysql.SMALLINT(display_width=6),
               type_=model.utils.Enum(QuestionnaireStatus),
               existing_nullable=True)
    op.alter_column('participant_summary', 'ethnicity',
               existing_type=mysql.SMALLINT(display_width=6),
               type_=model.utils.Enum(Ethnicity),
               existing_nullable=True)
    op.alter_column('participant_summary', 'gender_identity',
               existing_type=mysql.SMALLINT(display_width=6),
               type_=model.utils.Enum(GenderIdentity),
               existing_nullable=True)
    op.alter_column('participant_summary', 'membership_tier',
               existing_type=mysql.SMALLINT(display_width=6),
               type_=model.utils.Enum(MembershipTier),
               existing_nullable=True)
    op.alter_column('participant_summary', 'physical_measurements_status',
               existing_type=mysql.SMALLINT(display_width=6),
               type_=model.utils.Enum(PhysicalMeasurementsStatus),
               existing_nullable=True)
    op.alter_column('participant_summary', 'questionnaire_on_family_health',
               existing_type=mysql.SMALLINT(display_width=6),
               type_=model.utils.Enum(QuestionnaireStatus),
               existing_nullable=True)
    op.alter_column('participant_summary', 'questionnaire_on_healthcare_access',
               existing_type=mysql.SMALLINT(display_width=6),
               type_=model.utils.Enum(QuestionnaireStatus),
               existing_nullable=True)
    op.alter_column('participant_summary', 'questionnaire_on_medical_history',
               existing_type=mysql.SMALLINT(display_width=6),
               type_=model.utils.Enum(QuestionnaireStatus),
               existing_nullable=True)
    op.alter_column('participant_summary', 'questionnaire_on_medications',
               existing_type=mysql.SMALLINT(display_width=6),
               type_=model.utils.Enum(QuestionnaireStatus),
               existing_nullable=True)
    op.alter_column('participant_summary', 'questionnaire_on_overall_health',
               existing_type=mysql.SMALLINT(display_width=6),
               type_=model.utils.Enum(QuestionnaireStatus),
               existing_nullable=True)
    op.alter_column('participant_summary', 'questionnaire_on_personal_habits',
               existing_type=mysql.SMALLINT(display_width=6),
               type_=model.utils.Enum(QuestionnaireStatus),
               existing_nullable=True)
    op.alter_column('participant_summary', 'questionnaire_on_sociodemographics',
               existing_type=mysql.SMALLINT(display_width=6),
               type_=model.utils.Enum(QuestionnaireStatus),
               existing_nullable=True)
    op.alter_column('participant_summary', 'race',
               existing_type=mysql.SMALLINT(display_width=6),
               type_=model.utils.Enum(Race),
               existing_nullable=True)
    op.alter_column('physical_measurements', 'final',
               existing_type=mysql.TINYINT(display_width=1),
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('questionnaire_concept', 'concept_code',
               existing_type=mysql.VARCHAR(length=20),
               nullable=False)
    op.alter_column('questionnaire_concept', 'concept_system',
               existing_type=mysql.VARCHAR(length=50),
               type_=sa.String(length=255),
               nullable=False)
    op.alter_column('questionnaire_concept', 'questionnaire_id',
               existing_type=mysql.INTEGER(display_width=11),
               nullable=False)
    op.alter_column('questionnaire_concept', 'questionnaire_version',
               existing_type=mysql.INTEGER(display_width=11),
               nullable=False)
    op.alter_column('questionnaire_question', 'concept_system',
               existing_type=mysql.VARCHAR(length=50),
               type_=sa.String(length=255),
               existing_nullable=True)
    op.alter_column('questionnaire_response_answer', 'question_id',
               existing_type=mysql.INTEGER(display_width=11),
               nullable=False)
    op.alter_column('questionnaire_response_answer', 'questionnaire_response_id',
               existing_type=mysql.INTEGER(display_width=11),
               nullable=False)
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.alter_column('questionnaire_response_answer', 'questionnaire_response_id',
               existing_type=mysql.INTEGER(display_width=11),
               nullable=True)
    op.alter_column('questionnaire_response_answer', 'question_id',
               existing_type=mysql.INTEGER(display_width=11),
               nullable=True)
    op.alter_column('questionnaire_question', 'concept_system',
               existing_type=sa.String(length=255),
               type_=mysql.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('questionnaire_concept', 'questionnaire_version',
               existing_type=mysql.INTEGER(display_width=11),
               nullable=True)
    op.alter_column('questionnaire_concept', 'questionnaire_id',
               existing_type=mysql.INTEGER(display_width=11),
               nullable=True)
    op.alter_column('questionnaire_concept', 'concept_system',
               existing_type=sa.String(length=255),
               type_=mysql.VARCHAR(length=50),
               nullable=True)
    op.alter_column('questionnaire_concept', 'concept_code',
               existing_type=mysql.VARCHAR(length=20),
               nullable=True)
    op.alter_column('physical_measurements', 'final',
               existing_type=sa.Boolean(),
               type_=mysql.TINYINT(display_width=1),
               existing_nullable=False)
    op.alter_column('participant_summary', 'race',
               existing_type=model.utils.Enum(Race),
               type_=mysql.SMALLINT(display_width=6),
               existing_nullable=True)
    op.alter_column('participant_summary', 'questionnaire_on_sociodemographics',
               existing_type=model.utils.Enum(QuestionnaireStatus),
               type_=mysql.SMALLINT(display_width=6),
               existing_nullable=True)
    op.alter_column('participant_summary', 'questionnaire_on_personal_habits',
               existing_type=model.utils.Enum(QuestionnaireStatus),
               type_=mysql.SMALLINT(display_width=6),
               existing_nullable=True)
    op.alter_column('participant_summary', 'questionnaire_on_overall_health',
               existing_type=model.utils.Enum(QuestionnaireStatus),
               type_=mysql.SMALLINT(display_width=6),
               existing_nullable=True)
    op.alter_column('participant_summary', 'questionnaire_on_medications',
               existing_type=model.utils.Enum(QuestionnaireStatus),
               type_=mysql.SMALLINT(display_width=6),
               existing_nullable=True)
    op.alter_column('participant_summary', 'questionnaire_on_medical_history',
               existing_type=model.utils.Enum(QuestionnaireStatus),
               type_=mysql.SMALLINT(display_width=6),
               existing_nullable=True)
    op.alter_column('participant_summary', 'questionnaire_on_healthcare_access',
               existing_type=model.utils.Enum(QuestionnaireStatus),
               type_=mysql.SMALLINT(display_width=6),
               existing_nullable=True)
    op.alter_column('participant_summary', 'questionnaire_on_family_health',
               existing_type=model.utils.Enum(QuestionnaireStatus),
               type_=mysql.SMALLINT(display_width=6),
               existing_nullable=True)
    op.alter_column('participant_summary', 'physical_measurements_status',
               existing_type=model.utils.Enum(PhysicalMeasurementsStatus),
               type_=mysql.SMALLINT(display_width=6),
               existing_nullable=True)
    op.alter_column('participant_summary', 'membership_tier',
               existing_type=model.utils.Enum(MembershipTier),
               type_=mysql.SMALLINT(display_width=6),
               existing_nullable=True)
    op.alter_column('participant_summary', 'gender_identity',
               existing_type=model.utils.Enum(GenderIdentity),
               type_=mysql.SMALLINT(display_width=6),
               existing_nullable=True)
    op.alter_column('participant_summary', 'ethnicity',
               existing_type=model.utils.Enum(Ethnicity),
               type_=mysql.SMALLINT(display_width=6),
               existing_nullable=True)
    op.alter_column('participant_summary', 'consent_for_study_enrollment',
               existing_type=model.utils.Enum(QuestionnaireStatus),
               type_=mysql.SMALLINT(display_width=6),
               existing_nullable=True)
    op.alter_column('participant_summary', 'consent_for_electronic_health_records',
               existing_type=model.utils.Enum(QuestionnaireStatus),
               type_=mysql.SMALLINT(display_width=6),
               existing_nullable=True)
    op.alter_column('metrics_version', 'in_progress',
               existing_type=sa.Boolean(),
               type_=mysql.TINYINT(display_width=1),
               existing_nullable=False)
    op.alter_column('metrics_version', 'complete',
               existing_type=sa.Boolean(),
               type_=mysql.TINYINT(display_width=1),
               existing_nullable=False)
    op.alter_column('biobank_ordered_sample', 'processing_required',
               existing_type=sa.Boolean(),
               type_=mysql.TINYINT(display_width=1),
               existing_nullable=False)
    op.alter_column('biobank_ordered_sample', 'description',
               existing_type=mysql.TEXT(),
               nullable=True)
    # ### end Alembic commands ###
